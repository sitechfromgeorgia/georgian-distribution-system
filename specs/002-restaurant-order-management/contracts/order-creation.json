{
  "contract": "Order Creation API",
  "version": "1.0.0",
  "endpoint": "POST /api/orders",
  "description": "Create a new order from shopping cart with delivery details",
  "performance": {
    "target": "<500ms p95",
    "timeout": "10s"
  },
  "authentication": {
    "required": true,
    "role": "restaurant"
  },
  "request": {
    "headers": {
      "Content-Type": "application/json",
      "Authorization": "Bearer <jwt_token>"
    },
    "body": {
      "type": "object",
      "required": ["delivery_address", "items"],
      "properties": {
        "delivery_address": {
          "type": "string",
          "minLength": 10,
          "maxLength": 500,
          "description": "Delivery address in Georgian format"
        },
        "special_instructions": {
          "type": "string",
          "maxLength": 1000,
          "description": "Special delivery instructions"
        },
        "items": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "required": ["product_id", "quantity"],
            "properties": {
              "product_id": {
                "type": "string",
                "format": "uuid",
                "description": "Product identifier from catalog"
              },
              "quantity": {
                "type": "number",
                "minimum": 0.001,
                "maximum": 9999.999,
                "description": "Quantity in decimal format"
              },
              "special_instructions": {
                "type": "string",
                "maxLength": 200,
                "description": "Item-specific instructions"
              }
            }
          }
        }
      },
      "example": {
        "delivery_address": "თბილისი, საბურთალო, ვაჟა-ფშაველას ქუჩა 15",
        "special_instructions": "დაგვირეკეთ ჩამოსვლამდე 30 წუთით ადრე",
        "items": [
          {
            "product_id": "123e4567-e89b-12d3-a456-426614174000",
            "quantity": 2.5,
            "special_instructions": "ნაკლებად ცხიმიანი"
          },
          {
            "product_id": "123e4567-e89b-12d3-a456-426614174001",
            "quantity": 1.0
          }
        ]
      }
    }
  },
  "response": {
    "status": 201,
    "headers": {
      "Content-Type": "application/json"
    },
    "body": {
      "type": "object",
      "required": ["order_id", "status", "created_at"],
      "properties": {
        "order_id": {
          "type": "string",
          "format": "uuid",
          "description": "Unique order identifier"
        },
        "status": {
          "type": "string",
          "enum": ["pending"],
          "description": "Initial order status"
        },
        "created_at": {
          "type": "string",
          "format": "date-time",
          "description": "Order creation timestamp in UTC+4"
        },
        "estimated_delivery": {
          "type": "string",
          "format": "date-time",
          "description": "Estimated delivery time (optional)"
        },
        "total_items": {
          "type": "integer",
          "description": "Total number of items in order"
        }
      },
      "example": {
        "order_id": "123e4567-e89b-12d3-a456-426614174002",
        "status": "pending",
        "created_at": "2025-11-01T09:49:27.539Z",
        "estimated_delivery": "2025-11-02T14:00:00.000Z",
        "total_items": 2
      }
    }
  },
  "errors": {
    "400": {
      "description": "Invalid request data",
      "body": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string",
            "enum": ["invalid_delivery_address", "empty_cart", "invalid_quantity", "product_unavailable"]
          },
          "message": {
            "type": "string",
            "description": "Detailed error message in Georgian"
          }
        }
      }
    },
    "401": {
      "description": "Unauthorized - invalid or missing authentication"
    },
    "403": {
      "description": "Forbidden - restaurant role required"
    },
    "409": {
      "description": "Conflict - cart has been modified",
      "body": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string",
            "enum": ["cart_conflict", "product_out_of_stock"]
          },
          "message": {
            "type": "string"
          }
        }
      }
    },
    "429": {
      "description": "Rate limit exceeded",
      "headers": {
        "Retry-After": "60"
      }
    },
    "500": {
      "description": "Internal server error"
    }
  },
  "georgian_localization": {
    "status_labels": {
      "pending": "მოლოდინში"
    },
    "error_messages": {
      "invalid_delivery_address": "გთხოვთ, შეამოწმოთ მიტანის მისამართის სისწორე",
      "empty_cart": "კალათა ცარიეა. გთხოვთ, დაამატოთ პროდუქტები",
      "cart_conflict": "კალათა შეიცვალა. გთხოვთ, განაახლოთ კალათა და სცადოთ ხელახლა",
      "product_unavailable": "ზოგიერთი პროდუქტი არ არის ხელმისაწვდომი"
    },
    "currency": "GEL",
    "timezone": "Asia/Tbilisi",
    "date_format": "DD/MM/YYYY HH:mm"
  },
  "validation": {
    "zod_schema": "OrderCreateSchema",
    "location": "frontend/src/lib/validators/restaurant/orders.ts"
  },
  "real_time_notifications": {
    "channel": "new-orders",
    "payload": {
      "order_id": "uuid",
      "restaurant_id": "uuid", 
      "restaurant_name": "string",
      "delivery_address": "string",
      "total_items": "number",
      "special_instructions": "string?",
      "timestamp": "ISO timestamp"
    }
  }
}